<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
<div class="container">
    <div class="controls">
        <button (click)="handleClick()" class="btn btn-big">
            <div *ngIf="isMusicaTocando(); then pause else play"></div>
            <ng-template #play >
                <span class="material-symbols-rounded">
                    play_arrow
                </span>
            </ng-template>
            <ng-template #pause>
                <span class="material-symbols-rounded">
                    pause
                </span>
            </ng-template>
        </button>
        <div class="volume-slider">
            <input class="range" type="range" min="0" max="1" step=".05" [value]="getDefaultVolume()" (input)="setVolume($event)">
            <div class="bar">
                <div class="progress" [style.width.%]="getVolume()"></div>
            </div>
        </div>
    </div>

    <div class="perguntas">
        <h1 *ngIf="jogo.respondendo">Guess the song</h1>
        <div class="resposta" *ngIf="respostaCerta">
            <h5>Correct!</h5>
            <h1>{{pergunta.musica.nome.toUpperCase()}}</h1>
            <p>{{jogo.acertos}} / {{perguntas.length}}</p>
        </div>
        <div class="resposta" *ngIf="jogo.perdedor">
            <h5>The answer was</h5>
            <h1>{{pergunta.musica.nome.toUpperCase()}}</h1>
            <p>{{jogo.acertos}} / {{perguntas.length}}</p>
        </div>

        <div class="ganhador success-text" style="margin: 0;" *ngIf="jogo.ganhador">
            <h2>GOD GAMER!</h2>
        </div>
        
        <form class="form" *ngIf="perguntas.length">

            <div class="alternativas" *ngIf="jogo.respondendo">
                <div class="alternativa"  *ngFor="let alternativa of pergunta.alternativas">
                    <input  [formControl]="respostaInput" type="radio" [value]="alternativa.id" [id]="+alternativa.id+'_'+pergunta.musica.id">
                    <label [for]="+alternativa.id+'_'+pergunta.musica.id">{{alternativa.nome}}</label>
                </div>
            </div>
            <p *ngIf="!jogo.respondendo" [ngClass]="[jogo.perdedor ? 'error-text' : 'success-text']">You answered</p>
            <div [ngClass]="[jogo.perdedor ? 'alternativa-resposta errado' : 'alternativa-resposta certo']" *ngIf="!jogo.respondendo">
                <input id="resposta" type="radio" checked>
                <label for="resposta" >{{resposta.nome}}</label>
            </div>
            
        </form>

        <button (click)="responder()" [disabled]="!isRespostaValid()" *ngIf="jogo.respondendo" class="btn btn-medium" title="Answer">Answer</button>
        <button (click)="recomecar()" class="btn btn-medium" *ngIf="jogo.perdedor || jogo.ganhador" title="Replay">
            <span class="material-symbols-rounded">
                replay
            </span>
        </button>
        <button (click)="nextPergunta()" *ngIf="!jogo.respondendo && respostaCerta && !jogo.ganhador" class="btn btn-medium" title="Next">
            next
            <span class="material-symbols-rounded">
                forward
            </span>
        </button>
        <a class="link" routerLink="home" *ngIf="!jogo.perdedor">Home</a>
    </div>
    <div class="separator">
        <img src="../../../assets/separatorLight.png" class="separator-img">
    </div>
</div>
